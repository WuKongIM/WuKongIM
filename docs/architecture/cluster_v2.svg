<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1500" height="800" viewBox="0 0 1500 800" style="background-color: #f8f9fa;">
  <defs>
    <marker id="arrowhead" markerWidth="6" markerHeight="4" refX="0" refY="2" orient="auto">
      <polygon points="0 0, 6 2, 0 4" fill="#adb5bd" />
    </marker>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
      <feOffset dx="2" dy="2" result="offsetblur"/>
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.3"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <!-- Gradients -->
    <linearGradient id="user-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#74c0fc;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#4dabf7;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="proxy-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4c6ef5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#364fc7;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="admin-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#66d9e8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#22b8cf;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="node-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ffa94d;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f76707;stop-opacity:1" />
    </linearGradient>

    <style>
      .box { filter: url(#shadow); stroke: white; stroke-width: 2; }
      .user-box { fill: url(#user-gradient); rx: 4; ry: 4; }
      .proxy-box { fill: url(#proxy-gradient); rx: 4; ry: 4; }
      .admin-box { fill: url(#admin-gradient); rx: 4; ry: 4; }
      .node-circle { fill: url(#node-gradient); filter: url(#shadow); stroke: white; stroke-width: 2; }
      
      .pool-circle { fill: #ffffff; stroke: #dee2e6; stroke-width: 2; stroke-dasharray: 8 4; }
      
      .text-white { font-family: 'Segoe UI', sans-serif; fill: white; text-anchor: middle; font-size: 14px; font-weight: 600; }
      .text-dark { font-family: 'Segoe UI', sans-serif; fill: #495057; text-anchor: middle; font-size: 14px; }
      .text-title { font-family: 'Segoe UI', sans-serif; fill: #343a40; text-anchor: middle; font-size: 16px; font-weight: bold; }
      .text-desc { font-family: 'Segoe UI', sans-serif; fill: #868e96; font-size: 12px; }
      
      .arrow { stroke: #adb5bd; stroke-width: 1.5; marker-end: url(#arrowhead); fill: none; }
      .arrow-dashed { stroke: #adb5bd; stroke-width: 1.5; marker-end: url(#arrowhead); fill: none; stroke-dasharray: 4 2; }
    </style>
  </defs>

  <!-- Left Side: Users and Proxies -->
  <!-- China Users -->
  <rect x="50" y="300" width="120" height="100" class="box user-box" />
  <text x="110" y="355" class="text-white">中国用户</text>

  <!-- Overseas Users -->
  <rect x="50" y="500" width="120" height="100" class="box user-box" />
  <text x="110" y="555" class="text-white">海外用户</text>

  <!-- China Proxies -->
  <rect x="300" y="300" width="120" height="100" class="box proxy-box" />
  <text x="360" y="345" class="text-white">国内 N 个</text>
  <text x="360" y="365" class="text-white">代理节点</text>

  <!-- Overseas Proxies -->
  <rect x="300" y="500" width="120" height="100" class="box proxy-box" />
  <text x="360" y="545" class="text-white">海外 N 个</text>
  <text x="360" y="565" class="text-white">代理节点</text>

  <!-- Arrows: Users <-> Proxies -->
  <line x1="180" y1="330" x2="290" y2="330" class="arrow" />
  <line x1="290" y1="370" x2="180" y2="370" class="arrow" />
  
  <line x1="180" y1="530" x2="290" y2="530" class="arrow" />
  <line x1="290" y1="570" x2="180" y2="570" class="arrow" />

  <!-- Center: Distributed Pool -->
  <circle cx="800" cy="450" r="280" class="pool-circle" />
  <text x="800" y="140" class="text-title">WuKongIM 去中心化分布式池</text>

  <!-- Pool Nodes -->
  <g transform="translate(620, 270)">
    <!-- Row 1 -->
    <circle cx="50" cy="50" r="45" class="node-circle" />
    <text x="50" y="55" class="text-white" font-size="12">WuKongIM</text>
    
    <circle cx="180" cy="50" r="45" class="node-circle" />
    <text x="180" y="55" class="text-white" font-size="12">WuKongIM</text>
    
    <circle cx="310" cy="50" r="45" class="node-circle" />
    <text x="310" y="55" class="text-white" font-size="12">WuKongIM</text>

    <!-- Row 2 -->
    <circle cx="50" cy="180" r="45" class="node-circle" />
    <text x="50" y="185" class="text-white" font-size="12">WuKongIM</text>
    
    <circle cx="180" cy="180" r="45" class="node-circle" />
    <text x="180" y="185" class="text-white" font-size="12">WuKongIM</text>
    
    <circle cx="310" cy="180" r="45" class="node-circle" />
    <text x="310" y="185" class="text-white" font-size="12">WuKongIM</text>

    <!-- Row 3 -->
    <circle cx="50" cy="310" r="45" class="node-circle" />
    <text x="50" y="315" class="text-white" font-size="12">WuKongIM</text>
    
    <circle cx="180" cy="310" r="45" class="node-circle" />
    <text x="180" y="315" class="text-white" font-size="12">WuKongIM</text>
    
    <circle cx="310" cy="310" r="45" class="node-circle" />
    <text x="310" y="315" class="text-white" font-size="12">...</text>
  </g>

  <!-- Arrows: Proxies -> Pool -->
  <line x1="430" y1="350" x2="560" y2="350" class="arrow" />
  <line x1="430" y1="550" x2="560" y2="550" class="arrow" />

  <!-- Top Side: Admin -->
  <!-- Admin Icon (Simplified) -->
  <circle cx="500" cy="50" r="15" fill="#a5d8ff" />
  <circle cx="500" cy="80" r="25" fill="#a5d8ff" /> <!-- Body -->
  
  <rect x="600" y="40" width="120" height="80" class="box admin-box" />
  <text x="660" y="85" class="text-white">管理系统</text>
  
  <line x1="530" y1="80" x2="590" y2="80" class="arrow" />

  <rect x="600" y="150" width="120" height="80" class="box proxy-box" />
  <text x="660" y="195" class="text-white">代理节点</text>
  
  <line x1="660" y1="125" x2="660" y2="145" class="arrow" />
  <line x1="660" y1="235" x2="660" y2="265" class="arrow" /> <!-- To Pool -->

  <!-- Extra Node (Scaling) -->
  <circle cx="1150" cy="250" r="45" class="node-circle" />
  <text x="1150" y="255" class="text-white" font-size="12">WuKongIM</text>
  
  <line x1="1110" y1="280" x2="980" y2="330" class="arrow-dashed" />

  <!-- Annotations -->
  <g>
    <text x="180" y="250" class="text-desc" text-anchor="middle">只有代理节点向外服务，真实 WuKongIM 节点隐藏在背后，</text>
    <text x="180" y="270" class="text-desc" text-anchor="middle">避免恶意攻击直接打到真实节点</text>
  </g>

  <g transform="translate(1160, 350)">
    <text x="0" y="0" class="text-desc" text-anchor="start">WuKongIM 节点都是去中心化的</text>
    <text x="0" y="20" class="text-desc" text-anchor="start">当用户数量上升的时候，往这池子里一键加 WuKongIM 节点即可</text>
  </g>

  <g transform="translate(1120, 500)">
    <text x="0" y="0" class="text-desc" text-anchor="start">当池中某个节点出现故障，故障将会自动愈合</text>
  </g>

</svg>
